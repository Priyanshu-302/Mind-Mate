<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="dashboard.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="site.webmanifest" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="android-chrome-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="512x512"
      href="android-chrome-512x512.png"
    />
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <title>Dashboard | Mind Mate</title>
  </head>
  <body>
    <header>
      <div class="logo">Mind Mate</div>
      <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
      <nav>
        <a href="dashboard.html">Dashboard</a>
        <a href="mood.html">Mood Log</a>
        <a href="#">Chat Assistant</a>
        <a href="#">Nearby Clinics</a>
        <a href="#">Goals</a>
        <a href="landing.html">Logout</a>
        <div class="notification-wrapper">
          <button class="notification-btn" onclick="toggleNotifications()">
            üîî
          </button>
          <div class="notification-dropdown" id="notificationDropdown">
            <p class="notification-title">Notifications</p>
            <ul>
              <li>üßò Daily mood check-in available</li>
              <li>üìÖ New goal reminder: Journal tonight</li>
              <li>üìç Nearby therapy center update</li>
            </ul>
          </div>
        </div>
        <button class="toggle-theme" onclick="toggleTheme()">üåì</button>
      </nav>
    </header>

    <section class="profile-widget" data-aos="fade-down">
      <div class="profile-card">
        <img
          src="https://i.pravatar.cc/100?img=3"
          alt="User Profile"
          class="avatar"
        />
        <div class="profile-info">
          <h3>Priyanshu Das</h3>
          <p>dasp98458@gmail.com</p>
          <button class="edit-btn" onclick="openProfileModal()">
            Edit Profile
          </button>
        </div>
      </div>
    </section>

    <div id="editProfileModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeProfileModal()">&times;</span>
        <h2>Edit Profile</h2>
        <form onsubmit="saveProfile(event)">
          <label for="editName">Name</label>
          <input
            type="text"
            id="editName"
            placeholder="Enter your name"
            required
          />

          <label for="editEmail">Email</label>
          <input
            type="email"
            id="editEmail"
            placeholder="Enter your email"
            required
          />

          <label for="editGender">Gender</label>
          <select id="editGender" onchange="updateAvatarPreview()">
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="other">Other</option>
          </select>

          <label for="editDOB">Date of Birth</label>
          <input type="date" id="editDOB" />

          <label for="editBio">Bio</label>
          <textarea
            id="editBio"
            placeholder="Tell us a bit about yourself..."
            rows="3"
          ></textarea>

          <label for="editTheme">Preferred Theme</label>
          <select id="editTheme">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>

          <div class="avatar-preview-wrapper">
            <label>Avatar Preview</label><br />
            <img
              id="avatarPreview"
              src="https://i.pravatar.cc/100?img=1"
              class="avatar"
            />
          </div>

          <div style="margin-top: 1rem">
            <button type="submit" class="save-btn">Save</button>
            <button
              type="button"
              class="save-btn"
              style="background: #ccc; color: #000"
              onclick="closeProfileModal()"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <main class="dashboard">
      <div class="card" data-aos="fade-up">
        <h3>üìà Mood Overview</h3>
        <p>Track your emotional patterns and insights from the past week.</p>
      </div>
      <div class="card" data-aos="fade-up" data-aos-delay="100">
        <h3>ü§ñ AI Check-in Bot</h3>
        <p>
          Talk to your AI companion and reflect on how you're feeling today.
        </p>
      </div>
      <div class="card" data-aos="fade-up" data-aos-delay="200">
        <h3>üèÜ Self-Care Goals</h3>
        <p>Stay motivated with your daily and weekly mental health tasks.</p>
      </div>
      <div class="card" data-aos="fade-up" data-aos-delay="300">
        <h3>üìç Nearby Support</h3>
        <p>Find therapists and support centers near your location instantly.</p>
      </div>
    </main>

    <section data-aos="fade-up">
      <h2>üéØ Progress Tracker</h2>
      <p>Your current XP level: <strong>Level 5</strong></p>
      <div
        style="
          background-color: #e0e0e0;
          border-radius: 10px;
          height: 20px;
          margin-top: 0.5rem;
        "
      >
        <div
          style="
            height: 100%;
            width: 70%;
            background-color: var(--primary);
            border-radius: 10px;
          "
        ></div>
      </div>
    </section>

    <section data-aos="fade-up">
      <h2>üî• Self-Care Challenges</h2>
      <ul>
        <li>‚úÖ Meditate for 10 minutes</li>
        <li>‚úÖ Journal your mood daily</li>
        <li>‚¨ú Take a 15-min nature walk</li>
        <li>‚¨ú Sleep 8 hours for 3 nights</li>
      </ul>
    </section>

    <section data-aos="fade-up" style="background-color: var(--card)">
      <h2>üìö Resources</h2>
      <ul>
        <li><a href="#">üß† 5 Ways to Boost Mental Fitness</a></li>
        <li><a href="#">üì∫ Mindfulness Basics - YouTube</a></li>
        <li><a href="#">üìñ Free Therapy eBook</a></li>
      </ul>
    </section>

    <section data-aos="zoom-in">
      <blockquote>
        "You don't have to control your thoughts. You just have to stop letting
        them control you." ‚Äî Dan Millman
      </blockquote>
    </section>

    <footer>&copy; 2025 MindMate | Your Mental Health Companion</footer>

    <!-- Chatbot Button -->
    <button class="chatbot-btn" onclick="toggleChatbot()">üí¨</button>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();

      window.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme") || "light";
        document.documentElement.setAttribute("data-theme", savedTheme);

        // Load saved profile info
        const name = localStorage.getItem("username") || "Mind Mate User";
        const email = localStorage.getItem("email") || "user@example.com";
        const avatar =
          localStorage.getItem("avatar") || "https://i.pravatar.cc/100?img=3";

        document.querySelector(".profile-info h3").textContent = name;
        document.querySelector(".profile-info p").textContent = email;
        document.querySelector(".avatar").src = avatar;
      });

      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      }

      function toggleMenu() {
        const nav = document.querySelector("nav");
        nav.classList.toggle("active");
      }

      function toggleNotifications() {
        const dropdown = document.getElementById("notificationDropdown");
        dropdown.classList.toggle("active");
      }

      window.addEventListener("click", (e) => {
        const btn = document.querySelector(".notification-btn");
        const dropdown = document.getElementById("notificationDropdown");
        if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
          dropdown.classList.remove("active");
        }
      });

      function toggleChatbot() {
        const modal = document.getElementById("chatbotModal");
        modal.classList.toggle("show");
      }

      function openProfileModal() {
        const modal = document.getElementById("editProfileModal");

        document.getElementById("editName").value =
          localStorage.getItem("username") || "";
        document.getElementById("editEmail").value =
          localStorage.getItem("email") || "";
        document.getElementById("editGender").value =
          localStorage.getItem("gender") || "male";
        document.getElementById("editDOB").value =
          localStorage.getItem("dob") || "";
        document.getElementById("editBio").value =
          localStorage.getItem("bio") || "";
        document.getElementById("editTheme").value =
          localStorage.getItem("theme") || "light";
        document.getElementById("avatarPreview").src =
          localStorage.getItem("avatar") || "https://i.pravatar.cc/100?img=3";

        modal.classList.add("show");
      }

      function closeProfileModal() {
        const modal = document.getElementById("editProfileModal");
        modal.classList.remove("show");
      }

      function updateAvatarPreview() {
        const gender = document.getElementById("editGender").value;
        const base = gender === "female" ? 30 : gender === "male" ? 10 : 20;
        const randomId = base + Math.floor(Math.random() * 10);
        const avatarURL = `https://i.pravatar.cc/100?img=${randomId}`;
        document.getElementById("avatarPreview").src = avatarURL;
      }

      function saveProfile(e) {
        e.preventDefault();

        const name = document.getElementById("editName").value.trim();
        const email = document.getElementById("editEmail").value.trim();
        const gender = document.getElementById("editGender").value;
        const dob = document.getElementById("editDOB").value;
        const bio = document.getElementById("editBio").value.trim();
        const theme = document.getElementById("editTheme").value;
        const avatarURL = document.getElementById("avatarPreview").src;

        localStorage.setItem("username", name);
        localStorage.setItem("email", email);
        localStorage.setItem("gender", gender);
        localStorage.setItem("dob", dob);
        localStorage.setItem("bio", bio);
        localStorage.setItem("theme", theme);
        localStorage.setItem("avatar", avatarURL);

        document.documentElement.setAttribute("data-theme", theme);
        document.querySelector(".profile-info h3").textContent = name;
        document.querySelector(".profile-info p").textContent = email;
        document.querySelector(".avatar").src = avatarURL;

        closeProfileModal();
      }
    </script>
  </body>
</html>
